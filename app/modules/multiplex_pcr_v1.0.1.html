<style>
  .help-icon {
    position: relative;
    display: inline-block;
    cursor: help;
    z-index: 1;
    flex-shrink: 0;
    overflow: visible;
  }
  .help-icon:hover .help-tooltip,
  .help-icon:focus-within .help-tooltip {
    opacity: 1 !important;
    visibility: visible !important;
  }
  .help-icon:hover span:first-child {
    background: #4b5563;
  }
  .help-icon span:first-child {
    display: inline-block;
    width: 16px;
    height: 16px;
    line-height: 16px;
    text-align: center;
    border-radius: 50%;
    background: #6b7280;
    color: white;
    font-size: 0.7rem;
    font-weight: bold;
    transition: background 0.2s;
    position: relative;
    z-index: 1;
  }
  .help-tooltip {
    word-wrap: break-word;
    z-index: 999999 !important;
    position: absolute !important;
    padding: 12px;
    background: #1f2937;
    color: #fff;
    border-radius: 8px;
    font-size: 0.85rem;
    line-height: 1.5;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
    box-shadow: 0 8px 24px rgba(0,0,0,0.4);
    pointer-events: none;
    white-space: normal;
    max-width: 350px;
  }
  .help-icon:hover {
    z-index: 999998 !important;
  }
  .param-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-top: 12px;
    position: relative;
    overflow: visible;
  }
  .param-grid > .overlap-input {
    grid-column: 1 / -1;
  }
  @media (min-width: 800px) {
    .param-grid > .overlap-input:not(.reverse-overlap) {
      grid-column: 1 / span 3;
    }
    .param-grid > .overlap-input.reverse-overlap {
      grid-column: 4 / span 3;
    }
  }
  #results {
    display: none;
  }
  #results.show {
    display: block;
  }
  .warning-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000000;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .warning-modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
  }
  .warning-modal-content {
    position: relative;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    max-width: 500px;
    width: 90%;
    max-height: 80vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    animation: modalSlideIn 0.3s ease-out;
  }
  @keyframes modalSlideIn {
    from {
      opacity: 0;
      transform: translateY(-20px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  .warning-modal-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 20px 24px;
    background: #fff7ed;
    border-bottom: 1px solid #fde68a;
  }
  .warning-icon {
    font-size: 1.5rem;
    line-height: 1;
  }
  .warning-modal-header h3 {
    margin: 0;
    font-size: 1.2rem;
    color: #92400e;
    font-weight: 600;
  }
  .warning-modal-body {
    padding: 24px;
    flex: 1;
    overflow-y: auto;
  }
  .warning-modal-body p {
    margin: 0;
    font-size: 0.95rem;
    line-height: 1.6;
    color: #374151;
    white-space: pre-line;
  }
  .warning-modal-footer {
    padding: 16px 24px;
    border-top: 1px solid #e5e7eb;
    display: flex;
    justify-content: flex-end;
    background: #f9fafb;
  }
  .warning-modal-footer .btn {
    min-width: 80px;
  }
  
  /* QC Badge Styles */
  .qc-badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
    white-space: nowrap;
  }
  .qc-badge.qc-ok {
    background: #d1fae5;
    color: #065f46;
  }
  .qc-badge.qc-weak {
    background: #fef3c7;
    color: #92400e;
  }
  .qc-badge.qc-moderate {
    background: #fed7aa;
    color: #9a3412;
  }
  .qc-badge.qc-bad {
    background: #fecaca;
    color: #991b1b;
  }
  /* Legacy qc-warn class - map to qc-moderate */
  .qc-badge.qc-warn {
    background: #fed7aa;
    color: #9a3412;
  }
  
  /* Table styles for QC results */
  .results-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 16px;
  }
  .results-table th,
  .results-table td {
    padding: 8px 12px;
    text-align: center;
    border-bottom: 1px solid #e5e7eb;
  }
  .results-table th {
    background: #f9fafb;
    font-weight: 600;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  .results-table td.target-name {
    font-weight: 600;
    text-align: left;
  }
  .results-table td.mono {
    text-align: left;
    font-family: monospace;
  }
  
  /* Heatmap legend styles - horizontal layout */
  .heatmap-legend {
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
    padding: 12px;
    background: #fff;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    margin-top: 20px;
  }
  .heatmap-legend > div:first-child {
    font-weight: 600;
    margin-right: 8px;
  }
  .heatmap-legend-items {
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
    flex: 1;
  }
  .heatmap-legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .heatmap-legend-color {
    width: 20px;
    height: 20px;
    border: 1px solid #d1d5db;
    border-radius: 3px;
    flex-shrink: 0;
  }
</style>

<section class="pane" style="position: relative; overflow: visible;">
  <div style="position: relative; overflow: visible;">
      <div style="display: flex; align-items: center; justify-content: flex-start; gap: 12px; margin: 0 0 12px 0; position: relative; overflow: visible; flex-wrap: wrap;">
        <h3 style="font-size: 1.1rem; margin: 0;">Input Sequences</h3>
        <div style="display: flex; gap: 16px; align-items: center; flex-shrink: 0;">
          <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
            <input type="radio" name="input-mode" id="mode-design" value="design" checked style="width: auto; margin: 0;">
            <span style="display: flex; align-items: center; gap: 6px;">
              <strong>De Novo Design Mode</strong>
              <span class="help-icon" style="position: relative; display: inline-block; cursor: help; z-index: 1; flex-shrink: 0;">
                <span style="display: inline-block; width: 16px; height: 16px; line-height: 16px; text-align: center; border-radius: 50%; background: #6b7280; color: white; font-size: 0.7rem; font-weight: bold; transition: background 0.2s; position: relative; z-index: 1;">?</span>
                <span class="help-tooltip" style="position: absolute; top: calc(100% + 10px); left: 0; width: 420px; padding: 14px; background: #1f2937; color: #fff; border-radius: 8px; font-size: 0.85rem; line-height: 1.6; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; z-index: 999999 !important; box-shadow: 0 8px 24px rgba(0,0,0,0.4); pointer-events: none; white-space: normal;">
                  <p style="margin: 0 0 8px 0;"><strong>Target Sequences:</strong> Paste or upload multiple DNA target sequences in multi-FASTA format. Each target will receive one forward and one reverse primer pair under a shared PCR condition.</p>
                  <p style="margin: 0 0 8px 0;"><strong>Example:</strong></p>
                  <pre style="margin: 0; padding: 10px 12px; background: rgba(255,255,255,0.08); border-radius: 8px; font-size: 0.82rem; line-height: 1.4; overflow: auto; white-space: pre;">&gt;Target1
ATGCGTAGCTA...

&gt;Target2
GCTAGCTAGCT...</pre>
                  <span style="position: absolute; top: -6px; left: 20px; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #1f2937;"></span>
                </span>
              </span>
            </span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
            <input type="radio" name="input-mode" id="mode-qc" value="qc" style="width: auto; margin: 0;">
            <span style="display: flex; align-items: center; gap: 6px;">
              <strong>QC Mode</strong>
              <span class="help-icon" style="position: relative; display: inline-block; cursor: help; z-index: 1; flex-shrink: 0;">
                <span style="display: inline-block; width: 16px; height: 16px; line-height: 16px; text-align: center; border-radius: 50%; background: #6b7280; color: white; font-size: 0.7rem; font-weight: bold; transition: background 0.2s; position: relative; z-index: 1;">?</span>
                <span class="help-tooltip" style="position: absolute; top: calc(100% + 10px); left: 0; width: 460px; padding: 14px; background: #1f2937; color: #fff; border-radius: 8px; font-size: 0.85rem; line-height: 1.6; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; z-index: 999999 !important; box-shadow: 0 8px 24px rgba(0,0,0,0.4); pointer-events: none; white-space: normal;">
                  <p style="margin: 0 0 8px 0;"><strong>Designed Primer Pairs:</strong> Paste or upload designed primer pairs (FASTA format). The module performs QC and pooling analysis only.</p>
                  <p style="margin: 0 0 8px 0;"><strong>Supported primer name formats:</strong></p>
                  <ul style="margin: 4px 0 8px 20px; padding: 0; list-style: disc;">
                    <li style="margin-bottom: 4px;">Target1-F / Target1-R (with dash)</li>
                    <li style="margin-bottom: 4px;">Target1_F / Target1_R (with underscore)</li>
                    <li style="margin-bottom: 4px;">Target1F / Target1R (no separator)</li>
                    <li style="margin-bottom: 4px;">Target1-Forward / Target1-Reverse (full words)</li>
                    <li style="margin-bottom: 4px;">Target1_Forward / Target1_Reverse (full words with underscore)</li>
                    <li style="margin-bottom: 4px;">Target1-fwd / Target1-rev (abbreviated)</li>
                    <li style="margin-bottom: 4px;">Target1_FWD / Target1_REV (uppercase abbreviated)</li>
                  </ul>
                  <span style="position: absolute; top: -6px; left: 20px; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #1f2937;"></span>
                </span>
              </span>
            </span>
          </label>
        </div>
        <div style="display:flex; gap:8px; align-items:center; margin-left:auto; flex-shrink: 0;">
          <button class="demo btn" id="demo-set-btn" type="button">Demo Set</button>
          <button class="ghost btn" id="global-reset" type="button">Reset</button>
        </div>
      </div>

      <div id="design-mode-content" style="position: relative; overflow: visible;">
        <div style="margin-top: 12px;">
          <textarea id="target-sequences" placeholder=">Sequence1&#10;ATGCGTAGCTA...&#10;&#10;>Sequence2&#10;GCTAGCTAGCT..." style="min-height: 200px;"></textarea>
        </div>
        <div class="row" style="margin-top:6px; align-items: center;">
          <div id="sequences-preview" style="display: none; align-items: center; gap: 8px; margin-right: auto;">
            <button id="toggle-sequences-btn" class="btn btn-secondary" style="padding: 4px 12px; font-size: 0.8rem;">Show Details</button>
            <strong id="sequences-count" style="font-size: 0.85rem;">Loaded Sequences: 0</strong>
          </div>
          <div class="row end" style="gap: 8px; align-items: center; margin-left: auto;">
            <input type="file" id="fasta-upload" accept=".fasta,.fa,.fas,.txt" style="display: none;">
            <button type="button" class="btn demo" id="target-reverse-complement-btn">Reverse complement</button>
            <button class="btn demo" id="target-demo-btn" type="button">Demo</button>
            <button class="ghost btn" id="upload-btn" type="button">Upload</button>
          </div>
        </div>
        <div id="sequences-list-container" style="display: none; margin-top: 12px;">
          <div style="background: #f8f9fa; padding: 12px; border-radius: 8px; font-size: 0.85rem;">
            <ul id="sequences-list" style="margin: 0; padding-left: 20px;"></ul>
          </div>
        </div>
      </div>
      
      <div id="qc-mode-content" style="display: none; position: relative; overflow: visible;">
        <div style="margin-top: 12px;">
          <textarea id="primer-sequences" placeholder=">Target1-F&#10;ATGCGTAGCTA...&#10;&#10;>Target1-R&#10;GCTAGCTAGCT...&#10;&#10;>Target2-F&#10;ATGC...&#10;&#10;>Target2-R&#10;GCTA..." style="min-height: 200px;"></textarea>
        </div>
        <div class="row" style="margin-top:6px; align-items: center;">
          <div id="primers-preview" style="display: none; align-items: center; gap: 8px; margin-right: auto;">
            <button id="toggle-primers-btn" class="btn btn-secondary" style="padding: 4px 12px; font-size: 0.8rem;">Show Details</button>
            <strong id="primers-count" style="font-size: 0.85rem;">Loaded Primer Pairs: 0</strong>
          </div>
          <div class="row end" style="gap: 8px; align-items: center; margin-left: auto;">
            <input type="file" id="primer-upload" accept=".fasta,.fa,.fas,.txt" style="display: none;">
            <button type="button" class="btn demo" id="primer-reverse-complement-btn">Reverse complement</button>
            <button class="btn demo" id="primer-demo-btn" type="button">Demo</button>
            <button class="ghost btn" id="upload-primer-btn" type="button">Upload</button>
          </div>
        </div>
        <div id="primers-list-container" style="display: none; margin-top: 12px;">
          <div style="background: #f8f9fa; padding: 12px; border-radius: 8px; font-size: 0.85rem;">
            <ul id="primers-list" style="margin: 0; padding-left: 20px;"></ul>
          </div>
        </div>
      </div>
    </div>

  <div>
    <h2>Primer Design Parameters</h2>
      <div class="param-grid">
        <div>
          <label for="target-tm" class="aside" style="display: flex; align-items: center; gap: 6px; position: relative; overflow: visible;">
            <span>Target Tm (°C)</span>
            <span class="help-icon" style="position: relative; display: inline-block; cursor: help; z-index: 1; flex-shrink: 0;">
              <span style="display: inline-block; width: 16px; height: 16px; line-height: 16px; text-align: center; border-radius: 50%; background: #6b7280; color: white; font-size: 0.7rem; font-weight: bold; transition: background 0.2s; position: relative; z-index: 1;">?</span>
              <span class="help-tooltip" style="position: absolute; top: calc(100% + 10px); left: 0; width: 280px; padding: 12px; background: #1f2937; color: #fff; border-radius: 8px; font-size: 0.85rem; line-height: 1.5; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; z-index: 999999 !important; box-shadow: 0 8px 24px rgba(0,0,0,0.4); pointer-events: none; white-space: normal;">
                <p style="margin: 0;">Target melting temperature for primer design. Primers will be designed to have Tm close to this value. Typical range: 50-65°C.</p>
                <span style="position: absolute; top: -6px; left: 20px; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #1f2937;"></span>
              </span>
            </span>
          </label>
          <input type="number" id="target-tm" value="55" min="40" max="80" step="1">
        </div>
        <div>
          <label for="tm-tolerance" class="aside" style="display: flex; align-items: center; gap: 6px; position: relative; overflow: visible;">
            <span>ΔTm (°C)</span>
            <span class="help-icon" style="position: relative; display: inline-block; cursor: help; z-index: 1; flex-shrink: 0;">
              <span style="display: inline-block; width: 16px; height: 16px; line-height: 16px; text-align: center; border-radius: 50%; background: #6b7280; color: white; font-size: 0.7rem; font-weight: bold; transition: background 0.2s; position: relative; z-index: 1;">?</span>
              <span class="help-tooltip" style="position: absolute; top: calc(100% + 10px); left: 0; width: 280px; padding: 12px; background: #1f2937; color: #fff; border-radius: 8px; font-size: 0.85rem; line-height: 1.5; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; z-index: 999999 !important; box-shadow: 0 8px 24px rgba(0,0,0,0.4); pointer-events: none; white-space: normal;">
                <p style="margin: 0;">Maximum allowed difference between primer Tm and Target Tm. This controls how close each primer's melting temperature should be to the Target Tm. Larger values allow more flexibility but may result in less optimal primers.</p>
                <span style="position: absolute; top: -6px; left: 20px; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #1f2937;"></span>
              </span>
            </span>
          </label>
          <input type="number" id="tm-tolerance" value="2.5" min="0" max="10" step="0.5">
        </div>
        <div>
          <label for="primer-conc" class="aside" style="display: flex; align-items: center; gap: 6px; position: relative; overflow: visible;">
            <span>Primer conc. (nM)</span>
            <span class="help-icon" style="position: relative; display: inline-block; cursor: help; z-index: 1; flex-shrink: 0;">
              <span style="display: inline-block; width: 16px; height: 16px; line-height: 16px; text-align: center; border-radius: 50%; background: #6b7280; color: white; font-size: 0.7rem; font-weight: bold; transition: background 0.2s; position: relative; z-index: 1;">?</span>
              <span class="help-tooltip" style="position: absolute; top: calc(100% + 10px); left: 0; width: 280px; padding: 12px; background: #1f2937; color: #fff; border-radius: 8px; font-size: 0.85rem; line-height: 1.5; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; z-index: 999999 !important; box-shadow: 0 8px 24px rgba(0,0,0,0.4); pointer-events: none; white-space: normal;">
                <p style="margin: 0;">Effective primer concentration assumed for in silico Tm calculation. Typical range: 25-1000 nM.</p>
                <span style="position: absolute; top: -6px; left: 20px; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #1f2937;"></span>
              </span>
            </span>
          </label>
          <input type="number" id="primer-conc" value="500" min="50" max="2000" step="50">
        </div>
        <div>
          <label for="na-conc" class="aside" style="display: flex; align-items: center; gap: 6px; position: relative; overflow: visible;">
            <span>Na<sup>+</sup> Conc. (mM)</span>
            <span class="help-icon" style="position: relative; display: inline-block; cursor: help; z-index: 1; flex-shrink: 0;">
              <span style="display: inline-block; width: 16px; height: 16px; line-height: 16px; text-align: center; border-radius: 50%; background: #6b7280; color: white; font-size: 0.7rem; font-weight: bold; transition: background 0.2s; position: relative; z-index: 1;">?</span>
              <span class="help-tooltip" style="position: absolute; top: calc(100% + 10px); left: 0; width: 280px; padding: 12px; background: #1f2937; color: #fff; border-radius: 8px; font-size: 0.85rem; line-height: 1.5; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; z-index: 999999 !important; box-shadow: 0 8px 24px rgba(0,0,0,0.4); pointer-events: none; white-space: normal;">
                <p style="margin: 0;">Monovalent cation concentration used for salt-corrected Tm calculation. Typical range: 10-200 mM.</p>
                <span style="position: absolute; top: -6px; left: 20px; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #1f2937;"></span>
              </span>
            </span>
          </label>
          <input type="number" id="na-conc" value="50" min="0" max="200" step="5">
        </div>
        <div>
          <label for="mg-conc" class="aside" style="display: flex; align-items: center; gap: 6px; position: relative; overflow: visible;">
            <span>Mg<sup>2+</sup> Conc. (mM)</span>
            <span class="help-icon" style="position: relative; display: inline-block; cursor: help; z-index: 1; flex-shrink: 0;">
              <span style="display: inline-block; width: 16px; height: 16px; line-height: 16px; text-align: center; border-radius: 50%; background: #6b7280; color: white; font-size: 0.7rem; font-weight: bold; transition: background 0.2s; position: relative; z-index: 1;">?</span>
              <span class="help-tooltip" style="position: absolute; top: calc(100% + 10px); left: 0; width: 280px; padding: 12px; background: #1f2937; color: #fff; border-radius: 8px; font-size: 0.85rem; line-height: 1.5; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; z-index: 999999 !important; box-shadow: 0 8px 24px rgba(0,0,0,0.4); pointer-events: none; white-space: normal;">
                <p style="margin: 0;">Effective primer concentration assumed for in silico Tm calculation. Typical range: 25-1000 nM.</p>
                <span style="position: absolute; top: -6px; left: 20px; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #1f2937;"></span>
              </span>
            </span>
          </label>
          <input type="number" id="mg-conc" value="2.0" min="0" max="10" step="0.5">
        </div>
        <div>
          <label for="size-tolerance" class="aside" style="display: flex; align-items: center; gap: 6px; position: relative; overflow: visible;">
            <span>Size Tolerance (bp)</span>
            <span class="help-icon" style="position: relative; display: inline-block; cursor: help; z-index: 1; flex-shrink: 0;">
              <span style="display: inline-block; width: 18px; height: 18px; line-height: 18px; text-align: center; border-radius: 50%; background: #6b7280; color: white; font-size: 0.8rem; font-weight: bold; transition: background 0.2s; position: relative; z-index: 1;">?</span>
              <span class="help-tooltip" style="position: absolute; top: calc(100% + 10px); right: 0; width: 340px; padding: 14px; background: #1f2937; color: #fff; border-radius: 8px; font-size: 0.85rem; line-height: 1.6; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; z-index: 999999 !important; box-shadow: 0 8px 24px rgba(0,0,0,0.4); pointer-events: none; white-space: normal;">
                <strong style="display: block; margin-bottom: 10px; font-size: 0.9rem;">Product Size Tolerance:</strong>
                <ul style="margin: 8px 0 0 20px; padding: 0; list-style: disc;">
                  <li style="margin-bottom: 6px;"><strong>0:</strong> Disable size-based pooling (for cases without gel electrophoresis, e.g., qPCR, sequencing)</li>
                  <li style="margin-bottom: 6px;"><strong>5bp:</strong> High-resolution gel (2-3% agarose), can distinguish very close bands</li>
                  <li style="margin-bottom: 6px;"><strong>10-15bp:</strong> Standard gel (1-2% agarose), can reliably distinguish most bands</li>
                  <li style="margin-bottom: 6px;"><strong>20bp:</strong> Default value, suitable for most gel electrophoresis detection</li>
                </ul>
                <p style="margin: 10px 0 0 0; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.2);"><strong>Note 1:</strong> Pooling is primarily based on thermodynamic parameters (cross-dimer conflicts), size tolerance is only used as auxiliary criteria.</p>
                <p style="margin: 10px 0 0 0; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.2);"><strong>Note 2:</strong> In QC mode, no PCR product length information is available, size-based pooling is automatically disabled. PCR products cannot be distinguished based on size on gel electrophoresis.</p>
                <span style="position: absolute; top: -6px; right: 20px; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #1f2937;"></span>
              </span>
            </span>
          </label>
          <input type="number" id="size-tolerance" value="20" min="0" max="50" step="5">
        </div>
        <div class="overlap-input">
          <label for="overlap-seq-fwd" class="aside" style="display: flex; align-items: center; gap: 6px; position: relative; overflow: visible;">
            <span>Forward Overlap (optional)</span>
            <span class="help-icon" style="position: relative; display: inline-block; cursor: help; z-index: 1; flex-shrink: 0;">
              <span style="display: inline-block; width: 16px; height: 16px; line-height: 16px; text-align: center; border-radius: 50%; background: #6b7280; color: white; font-size: 0.7rem; font-weight: bold; transition: background 0.2s; position: relative; z-index: 1;">?</span>
              <span class="help-tooltip" style="position: absolute; top: calc(100% + 10px); left: 0; width: 320px; padding: 12px; background: #1f2937; color: #fff; border-radius: 8px; font-size: 0.85rem; line-height: 1.5; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; z-index: 999999 !important; box-shadow: 0 8px 24px rgba(0,0,0,0.4); pointer-events: none; white-space: normal;">
                <p style="margin: 0 0 8px 0;">Optional sequence to append to the 5' end of forward primers. Useful for cloning (e.g., Gibson Assembly, Golden Gate). Leave empty if not needed.</p>
                <p style="margin: 0; padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.2);"><strong>Note:</strong> The overlap sequence does not participate in Tm calculation. Tm is calculated based on the core primer sequence only, as the overlap portion remains unbound during initial PCR cycles.</p>
                <span style="position: absolute; top: -6px; left: 20px; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #1f2937;"></span>
              </span>
            </span>
          </label>
          <input type="text" id="overlap-seq-fwd" placeholder="e.g., ATGCGTAGCTA" style="font-family: monospace; font-size: 0.85rem;">
        </div>
        <div class="overlap-input reverse-overlap">
          <label for="overlap-seq-rev" class="aside" style="display: flex; align-items: center; gap: 6px; position: relative; overflow: visible;">
            <span>Reverse Overlap (optional)</span>
            <span class="help-icon" style="position: relative; display: inline-block; cursor: help; z-index: 1; flex-shrink: 0;">
              <span style="display: inline-block; width: 16px; height: 16px; line-height: 16px; text-align: center; border-radius: 50%; background: #6b7280; color: white; font-size: 0.7rem; font-weight: bold; transition: background 0.2s; position: relative; z-index: 1;">?</span>
              <span class="help-tooltip" style="position: absolute; top: calc(100% + 10px); left: 0; width: 320px; padding: 12px; background: #1f2937; color: #fff; border-radius: 8px; font-size: 0.85rem; line-height: 1.5; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; z-index: 999999 !important; box-shadow: 0 8px 24px rgba(0,0,0,0.4); pointer-events: none; white-space: normal;">
                <p style="margin: 0 0 8px 0;">Optional sequence to append to the 5' end of reverse primers. Useful for cloning (e.g., Gibson Assembly, Golden Gate). Leave empty if not needed.</p>
                <p style="margin: 0; padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.2);"><strong>Note:</strong> The overlap sequence does not participate in Tm calculation. Tm is calculated based on the core primer sequence only, as the overlap portion remains unbound during initial PCR cycles.</p>
                <span style="position: absolute; top: -6px; left: 20px; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #1f2937;"></span>
              </span>
            </span>
          </label>
          <input type="text" id="overlap-seq-rev" placeholder="e.g., GCTAGCTAGCT" style="font-family: monospace; font-size: 0.85rem;">
        </div>
      </div>
      <div style="display: flex; gap: 8px; margin-top: 20px; justify-content: space-between;">
        <button class="btn btn-primary" id="design-btn">Design Primers</button>
        <button class="btn btn-secondary" id="clear-btn" style="background: #ef4444; color: white; border: none;">Clear</button>
      </div>
    </div>

  <div id="results">
    <h2>Design Results</h2>
    <div id="results-content"></div>
  </div>
</section>

  <!-- Warning Modal -->
  <div id="warning-modal" class="warning-modal" style="display: none;">
    <div class="warning-modal-overlay"></div>
    <div class="warning-modal-content">
      <div class="warning-modal-header">
        <span class="warning-icon">⚠️</span>
        <h3>Warning</h3>
      </div>
      <div class="warning-modal-body">
        <p id="warning-message"></p>
      </div>
      <div class="warning-modal-footer">
        <button class="btn btn-primary" id="warning-ok-btn">OK</button>
      </div>
    </div>
  </div>
